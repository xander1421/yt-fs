{"version":3,"file":"background.js","sources":["../src/background.ts"],"sourcesContent":["/**\n * YouTube Tab-Fullscreen Extension - Background Script\n * Compatible with both Manifest V2 (Firefox) and V3 (Chrome)\n */\n\n// Use browser API if available (Firefox), otherwise use chrome API\nconst browserAPI = (typeof browser !== 'undefined' && browser) ? browser : chrome;\n\n// Listen for keyboard commands from the manifest\nbrowserAPI.commands.onCommand.addListener(async (command: string) => {\n  if (command === 'toggle-tabfs') {\n    try {\n      // Get the active tab\n      const tabs = await browserAPI.tabs.query({\n        active: true,\n        currentWindow: true\n      });\n      \n      const activeTab = tabs[0];\n      if (!activeTab?.id) {\n        return;\n      }\n      \n      // Check if the tab is on YouTube\n      if (!activeTab.url?.includes('youtube.com')) {\n        return;\n      }\n      \n      // Send message to content script\n      await browserAPI.tabs.sendMessage(activeTab.id, {\n        action: 'toggle-tabfs'\n      });\n    } catch (error) {\n      // Silent fail\n    }\n  }\n});\n\n// Handle extension icon click\n// For Manifest V3 (Chrome)\nif (browserAPI.action?.onClicked) {\n  browserAPI.action.onClicked.addListener(async (tab: any) => {\n    if (tab.id && tab.url?.includes('youtube.com')) {\n      try {\n        await browserAPI.tabs.sendMessage(tab.id, {\n          action: 'toggle-tabfs'\n        });\n      } catch (error) {\n        // Silent fail\n      }\n    }\n  });\n}\n\n// For Manifest V2 (Firefox)\nif (browserAPI.browserAction?.onClicked) {\n  browserAPI.browserAction.onClicked.addListener(async (tab: any) => {\n    if (tab.id && tab.url?.includes('youtube.com')) {\n      try {\n        await browserAPI.tabs.sendMessage(tab.id, {\n          action: 'toggle-tabfs'\n        });\n      } catch (error) {\n        // Silent fail\n      }\n    }\n  });\n}"],"names":[],"mappings":";;;IAMA,MAAM,UAAU,GAAG,CAAC,OAAO,OAAO,KAAK,WAAW,IAAI,OAAO,IAAI,OAAO,GAAG,MAAM;IAGjF,UAAU,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAW,CAAC,OAAO,OAAe,KAAI;IAClE,IAAA,IAAI,OAAO,KAAK,cAAc,EAAE;IAC9B,QAAA,IAAI;gBAEF,MAAM,IAAI,GAAG,MAAM,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC;IACvC,gBAAA,MAAM,EAAE,IAAI;IACZ,gBAAA,aAAa,EAAE;IAChB,aAAA,CAAC;IAEF,YAAA,MAAM,SAAS,GAAG,IAAI,CAAC,CAAC,CAAC;IACzB,YAAA,IAAI,CAAC,SAAS,EAAE,EAAE,EAAE;oBAClB;;gBAIF,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,QAAQ,CAAC,aAAa,CAAC,EAAE;oBAC3C;;gBAIF,MAAM,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,EAAE,EAAE;IAC9C,gBAAA,MAAM,EAAE;IACT,aAAA,CAAC;;YACF,OAAO,KAAK,EAAE;;;IAIpB,CAAC,CAAC;IAIF,IAAI,UAAU,CAAC,MAAM,EAAE,SAAS,EAAE;QAChC,UAAU,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,OAAO,GAAQ,KAAI;IACzD,QAAA,IAAI,GAAG,CAAC,EAAE,IAAI,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,aAAa,CAAC,EAAE;IAC9C,YAAA,IAAI;oBACF,MAAM,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,EAAE;IACxC,oBAAA,MAAM,EAAE;IACT,iBAAA,CAAC;;gBACF,OAAO,KAAK,EAAE;;;IAIpB,KAAC,CAAC;IACJ;IAGA,IAAI,UAAU,CAAC,aAAa,EAAE,SAAS,EAAE;QACvC,UAAU,CAAC,aAAa,CAAC,SAAS,CAAC,WAAW,CAAC,OAAO,GAAQ,KAAI;IAChE,QAAA,IAAI,GAAG,CAAC,EAAE,IAAI,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,aAAa,CAAC,EAAE;IAC9C,YAAA,IAAI;oBACF,MAAM,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,EAAE;IACxC,oBAAA,MAAM,EAAE;IACT,iBAAA,CAAC;;gBACF,OAAO,KAAK,EAAE;;;IAIpB,KAAC,CAAC;IACJ;;;;;;"}