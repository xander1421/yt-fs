!function(){"use strict";const t=[".ytp-skip-ad-button",".ytp-ad-skip-button",".ytp-ad-skip-button-modern",".videoAdUiSkipButton",'button[id^="skip-button:"]'],e=[".ytp-skip-ad",".ytp-skip-ad-button__text",".ytp-ad-text",".ytp-ad-overlay-container",".ytp-ad-player-overlay",'div[id^="skip-ad:"]'];var n,o,i;!function(t){t.isPremium=function(){return!0},t.showUpgradePrompt=function(){},t.startAlways=function(){i.start()}}(n||(n={})),function(n){n.startAlways=function(){i.start()},n.logAdElements=function(){e.forEach((t=>{document.querySelector(t)})),t.forEach((t=>{const e=document.querySelector(t);if(e){window.getComputedStyle(e)}})),document.querySelector("video")}}(o||(o={})),function(t){let e=!1,o=null,i=0,a=0,r=1;function c(){if(!e)return;if(window.location.pathname.startsWith("/shorts/"))return;const t=document.querySelector(".ad-showing"),n=document.querySelector(".ytp-ad-timed-pie-countdown-container"),o=document.querySelector(".ytp-ad-survey-questions");if(!t&&!n&&!o){const t=document.querySelector("video");return t&&s(t),void(i>0&&(i=0))}const r=Date.now();if(r-a<2e3)return;if(i++,i>5){if(r-a<1e4)return;i=0}a=r;let c=null,l=null;if(c=document.querySelector("#movie_player")||document.querySelector("#ytd-player"),c&&(l=c.getPlayer&&"function"==typeof c.getPlayer?c.getPlayer():c,l))if(n||o)u(l,c);else if(t){const t=document.querySelector("video.html5-main-video");if(t&&t.src&&!t.paused&&!isNaN(t.duration)){if("music.youtube.com"===window.location.hostname)return t.currentTime=t.duration,void(i=0);t.currentTime,t.currentTime=t.duration,setTimeout((()=>{document.querySelector(".ad-showing")?u(l,c):i=0}),1e3)}else u(l,c)}}function u(t,e){try{if(!t.getVideoData||"function"!=typeof t.getVideoData)return;const n=t.getVideoData();if(!n||!n.video_id)return;const o=n.video_id,a=Math.floor(t.getCurrentTime?t.getCurrentTime():0);if(e.loadVideoWithPlayerVars&&"function"==typeof e.loadVideoWithPlayerVars)e.loadVideoWithPlayerVars({videoId:o,start:a});else if(e.loadVideoByPlayerVars&&"function"==typeof e.loadVideoByPlayerVars)e.loadVideoByPlayerVars({videoId:o,start:a});else{if(!t.loadVideoById||"function"!=typeof t.loadVideoById)return;t.loadVideoById(o,a)}i=0}catch(t){const e=document.querySelector("video");e&&function(t){16!==t.playbackRate&&(r=t.playbackRate,t.playbackRate=16)}(e)}}function s(t){t.playbackRate!==r&&(t.playbackRate=r)}t.start=function(){n.isPremium()||n.startAlways(),e||(e=!0,function(){if(!e)return;o=window.setInterval((()=>{e&&c()}),500),c()}())},t.stop=function(){if(!e)return;e=!1,o&&(clearInterval(o),o=null);const t=document.querySelector("video");t&&s(t)},t.isRunning=function(){return e}}(i||(i={}));const a="ytTabFS",r="yt-tabfs-enabled",c="yt-tabfs-button";var u,s,l,d,f,y,p,m;async function w(){if(!window.location.pathname.includes("/watch"))return;if(await p.waitForPlayer()){if(d.inject()){u.getState()&&(s.enable(),l.updateButtonState(!0))}}else setTimeout((()=>w()),1e3)}function h(){!window.location.pathname.includes("/watch")&&s.isEnabled()&&(s.disable(),u.setState(!1)),m.handleInitialLoad(),f.start(),y.init()}!function(t){function e(){try{return"1"===sessionStorage.getItem(a)}catch{return!1}}function n(t){try{t?sessionStorage.setItem(a,"1"):sessionStorage.removeItem(a)}catch{}}t.load=e,t.save=n,t.getState=function(){return e()},t.setState=function(t){n(t)}}(u||(u={})),function(t){t.enable=function(){document.documentElement.classList.add(r)},t.disable=function(){document.documentElement.classList.remove(r)},t.isEnabled=function(){return document.documentElement.classList.contains(r)}}(s||(s={})),function(t){let e=null;function n(){document.querySelectorAll(`#${c}`).forEach((t=>{t.remove()})),e=null}function o(t){t.preventDefault(),t.stopPropagation();const e=!u.getState();e?s.enable():s.disable(),u.setState(e),i(e)}function i(t){e&&(t?(e.classList.add("active"),e.setAttribute("aria-pressed","true")):(e.classList.remove("active"),e.setAttribute("aria-pressed","false")))}t.cleanup=n,t.create=function(){n();const t=document.createElement("button");return t.id=c,t.className="ytp-button",t.setAttribute("aria-label","Tab Fullscreen"),t.setAttribute("title","Tab Fullscreen (Alt+T) | Auto Ad-Skip Always On"),t.setAttribute("data-tooltip-opaque","false"),t.innerHTML='\n      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round" style="pointer-events: none; width: 24px; height: 24px;">\n        \x3c!-- Tab bar (browser chrome) --\x3e\n        <rect x="6" y="2.5" width="12" height="2" rx="1" ry="1" fill="currentColor" stroke="none"/>\n        \x3c!-- Video frame --\x3e\n        <rect x="3" y="5" width="18" height="16" rx="2" ry="2"/>\n        \x3c!-- Up arrow --\x3e\n        <line x1="12" y1="9" x2="12" y2="6.2"/>\n        <polyline points="10.7,7.5 12,6 13.3,7.5"/>\n        \x3c!-- Down arrow --\x3e\n        <line x1="12" y1="14.8" x2="12" y2="17.6"/>\n        <polyline points="10.7,16.3 12,17.8 13.3,16.3"/>\n        \x3c!-- Left arrow --\x3e\n        <line x1="7.2" y1="12" x2="4.4" y2="12"/>\n        <polyline points="5.9,10.7 4.4,12 5.9,13.3"/>\n        \x3c!-- Right arrow --\x3e\n        <line x1="16.8" y1="12" x2="19.6" y2="12"/>\n        <polyline points="18.1,10.7 19.6,12 18.1,13.3"/>\n      </svg>\n    ',t.addEventListener("click",o),e=t,t},t.updateButtonState=i,t.getButton=function(){return e}}(l||(l={})),function(t){let e=!1;t.inject=function(){const t=document.getElementById(c);if(e&&t)return!0;e&&!t&&(e=!1);const n=document.querySelector(".ytp-chrome-controls .ytp-left-controls");if(!n)return!1;l.cleanup();const o=l.create(),a=u.getState();return l.updateButtonState(a),n.appendChild(o),i.start(),e=!0,!0},t.reset=function(){l.cleanup(),e=!1}}(d||(d={})),function(t){let e=null,n="",o="",i=null;function a(t,e=200){i&&clearTimeout(i),i=window.setTimeout(t,e)}t.start=function(){e||(n=window.location.pathname,o=window.location.href,e=new MutationObserver((()=>{const t=window.location.pathname,e=window.location.href;if(t!==n||e!==o)if(n=t,o=e,t.includes("/watch"))a((()=>{d.reset(),w().catch((t=>{}))}),150);else{if(u.getState()){s.disable(),u.setState(!1);l.getButton()&&l.updateButtonState(!1)}d.reset()}else if(t.includes("/watch")){document.getElementById(c)||a((()=>{d.reset(),w().catch((t=>{}))}),150)}})),e.observe(document.body,{childList:!0,subtree:!0}))},t.stop=function(){e&&(e.disconnect(),e=null)}}(f||(f={})),function(t){function e(){if(!window.location.pathname.includes("/watch"))return;const t=l.getButton();if(t)t.click();else if(d.inject()){const t=l.getButton();t&&t.click()}}t.init=function(){chrome.runtime.onMessage.addListener(((t,n,o)=>("toggle-tabfs"===t.action&&(e(),o({success:!0})),!0))),document.addEventListener("keydown",(t=>{t.altKey&&"t"===t.key.toLowerCase()&&(t.preventDefault(),t.stopPropagation(),e())}),!0)}}(y||(y={})),function(t){t.waitForPlayer=function(){return new Promise((t=>{let e=0;const n=()=>{const o=document.querySelector(".ytp-chrome-controls .ytp-left-controls"),i=document.querySelector("#movie_player");o&&i?t(!0):(e++,e>=50?t(!1):setTimeout(n,100))};n()}))}}(p||(p={})),function(t){let e=0;t.handleInitialLoad=function t(){window.location.pathname.includes("/watch")&&w().then((()=>{e=0})).catch((n=>{if(e<10){e++;const n=Math.min(1e3*Math.pow(2,e-1),5e3);setTimeout((()=>t()),n)}}))}}(m||(m={})),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",h):h(),window.ytTabFSDebug={logAdElements:()=>o.logAdElements(),isAdSkipperRunning:()=>i.isRunning(),stopAdSkipper:()=>i.stop(),startAdSkipper:()=>i.start()}}();
